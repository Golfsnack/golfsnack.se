<% content_for :meta_title, "#{@club.name} - Golfsnack.se" %>
<div class="">
  <div class="mt-6 block w-full bg-wetsand-100 relative" style="height: 420px;">
    <% if current_user.has_role?(:moderator, @club) %>
      <%= link_to club_cover_path(@club), class: "flex gap-2 text-sm bg-white rounded px-4 py-2 absolute bottom-4 right-2 bg-opacity-50 hover:bg-opacity-100 transition duration-150 ease-in-out hover:no-underline" do %>

        <svg class="mx-auto h-5 w-5 text-goflsnack-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
          <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <span>Ändra omslagsbild</span>
      <% end %>
    <% end %>
    <% if @club.cover.attached? %>
      <%= image_tag @club.cover, class: "object-cover w-full h-full" %>
    <% end %>
  </div>
  <div class="flex flex-col items-center justify-center w-full -mt-32">
    <div class="relative">
      <% if @club.logo.attached? %>
        <%= image_tag @club.logo, class: 'big-avatar' %>
      <% else %>
      <div class="h-40 w-20 bg-white big-avatar"></div>
      <% end %>
      <% if current_user.has_role?(:moderator, @club) %>
        <%= link_to club_logo_path(@club), class: "flex gap-2 text-sm bg-white rounded p-2 absolute top-2 right-2 bg-opacity-50 hover:bg-opacity-100 transition duration-150 ease-in-out" do %>
          <svg class="mx-auto h-5 w-5 text-goflsnack-400" stroke="currentColor" fill="none" viewBox="0 0 48 48">
            <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        <% end %>
      <% end %>
    </div>
    <h2 class="mt-4 uppercase text-golfsnack-500"><%= @club.name %></h2>
    <div class="flex flex-col items-center justify-between w-full p-4 my-12 text-white uppercase bg-wetsand-600 md:flex-row">
      <div>
        <span class="px-2 border-r border-white">
          <small class="font-light">antal hål</small> <strong class="text-lg font-bold"><%= @club.courses.sum(&:holes_count) %></strong>
        </span>
        <span class="px-2 border-r border-white">
          <small class="font-light">antal banor</small> <strong class="text-lg font-bold"><%= @club.courses.size %></strong>
        </span>
        <span class="px-2 ">
          <small class="font-light">par</small>
          <strong class="text-lg font-bold"><%= @club.courses.map(&:par).join(", ") %></strong>
        </span>
      </div>
      <div>
        <span class="px-2 flex items-center">
          <small class="mr-2"><%= pluralize(@club.users.count, "medlem", locale: :sv) %></small>
          <strong><%= render "shared/avatar_group", users: @club_users, extra: @extra_users_count %></strong>
        </span>
      </div>
    </div>
  </div>
</div>

<h4>Bilder här.. Från användare eller från klubb-admin?</h4>
<hr class="my-6"/>
<h4>Senaste golfsnacksmedlemmar som har spelat här...</h4>

<div class="grid md:grid-cols-2 my-12 gap-4 bg-wetsand-600 p-6">
  <div class="grid md:grid-cols-2 gap-4">
    <dl class="text-white uppercase grid grid-cols-2">
      <dt>Övninsgreen</dt>
      <dd>...</dd>
      <dt>Övningsbana</dt>
      <dd>...</dd>
      <dt>Grästyp</dt>
      <dd>...</dd>
      <dt>Övninsgreen</dt>
      <dd>...</dd>
      <dt>Övningsbana</dt>
      <dd>...</dd>
      <dt>Grästyp</dt>
      <dd>...</dd>
    </dl>
    <dl class="text-white uppercase grid grid-cols-2">
      <dt>Övninsgreen</dt>
      <dd>...</dd>
      <dt>Övningsbana</dt>
      <dd>...</dd>
      <dt>Grästyp</dt>
      <dd>...</dd>
      <dt>Övninsgreen</dt>
      <dd>...</dd>
      <dt>Övningsbana</dt>
      <dd>...</dd>
      <dt>Grästyp</dt>
      <dd>...</dd>
    </dl>
  </div>
  <div>
    <h5>Väder här...</h5>
  </div>
</div>

<% @club.courses.each do |course| %>
  <div class="bg-white mt-6 p-4 rounded border border-color-wetsand-400">
    <h5><%= course.name %></h5>
    <table class="w-full divide-y divide-sand-200 mt-6">
      <thead>
        <tr class="text-xs divide-x text-center">
          <th class="p-2"></th>
          <% course.holes.each do |hole|%>
            <th class="p-2"><%= hole.number %></th>
          <% end %>
          <th class="p-2">Total</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-sand-200 text-xs">
        <tr class="text-xs divide-x text-center">
          <td class="p-2">Par</td>
          <% course.holes.each do |hole|%>
            <td class="p-2"><%= hole.par %></td>
          <% end %>
          <td class="p-2"><%= course.par%></td>
        </tr>
        <tr class="text-xs divide-x text-center">
          <td class="p-2">Index</td>
          <% course.holes.each do |hole|%>
            <td class="p-2"><%= hole.index %></td>
          <% end %>
          <td class="p-2"></td>
        </tr>
      </tbody>
    </table>
  </div>
<% end %>
